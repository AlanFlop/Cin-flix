{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-form\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"alert alert-error\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = {\n  class: \"form-actions\"\n};\nconst _hoisted_6 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_ctx.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString(_ctx.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.handleLogin && $options.handleLogin(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_3, [_cache[3] || (_cache[3] = _createElementVNode(\"label\", {\n    for: \"email\"\n  }, \"Email\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.credentials.email = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.credentials.email]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"password\"\n  }, \"Mot de passe\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.credentials.password = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.credentials.password]])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn primary\",\n    disabled: _ctx.isLoggingIn\n  }, _toDisplayString(_ctx.isLoggingIn ? 'Connexion en cours...' : 'Se connecter'), 9 /* TEXT, PROPS */, _hoisted_6), _createVNode(_component_router_link, {\n    to: \"/reset-password\",\n    class: \"forgot-password\"\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\" Mot de passe oublié ? \")])),\n    _: 1 /* STABLE */\n  })])], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_ctx","error","_hoisted_2","_toDisplayString","_createCommentVNode","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","handleLogin","_hoisted_3","for","type","id","$event","$data","credentials","email","required","_hoisted_4","password","_hoisted_5","disabled","isLoggingIn","_hoisted_6","_createVNode","_component_router_link","to","default","_withCtx","_createTextVNode","_"],"sources":["/Users/alandelaigue/Desktop/cinema-v2/src/components/LoginForm.vue"],"sourcesContent":["<template>\n  <div class=\"login-form\">\n    <div v-if=\"error\" class=\"alert alert-error\">\n      {{ error }}\n    </div>\n    \n    <form @submit.prevent=\"handleLogin\">\n      <div class=\"form-group\">\n        <label for=\"email\">Email</label>\n        <input \n          type=\"email\" \n          id=\"email\" \n          v-model=\"credentials.email\" \n          class=\"form-control\" \n          required\n        />\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"password\">Mot de passe</label>\n        <input \n          type=\"password\" \n          id=\"password\" \n          v-model=\"credentials.password\" \n          class=\"form-control\" \n          required\n        />\n      </div>\n      \n      <div class=\"form-actions\">\n        <button type=\"submit\" class=\"btn primary\" :disabled=\"isLoggingIn\">\n          {{ isLoggingIn ? 'Connexion en cours...' : 'Se connecter' }}\n        </button>\n        <router-link to=\"/reset-password\" class=\"forgot-password\">\n          Mot de passe oublié ?\n        </router-link>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex';\n\nexport default {\n  name: 'LoginForm',\n  data() {\n    return {\n      credentials: {\n        email: '',\n        password: ''\n      }\n    };\n  },\n  computed: {\n    ...mapState('auth', ['error', 'isLoggingIn'])\n  },\n  methods: {\n    ...mapActions('auth', ['login', 'clearAuthError']),\n    \n    async handleLogin() {\n      console.log('Tentative de connexion avec:', this.credentials.email);\n      \n      // Effacer les erreurs précédentes\n      this.clearAuthError();\n      \n      try {\n        // Appeler l'action login du module auth\n        const response = await this.login(this.credentials);\n        \n        console.log('Connexion réussie, émission de l\\'événement login-success');\n        \n        // Important: émettre l'événement que LoginView attend\n        this.$emit('login-success');\n        \n        return response;\n      } catch (error) {\n        console.error('Erreur lors de la connexion:', error);\n        // L'erreur est déjà gérée par l'action login qui met à jour le state\n      }\n    }\n  },\n  created() {\n    // Effacer les erreurs au chargement du composant\n    this.clearAuthError();\n  }\n};\n</script>\n\n<style scoped>\n.login-form {\n  width: 100%;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n  color: #333;\n}\n\n.form-control {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 1rem;\n}\n\n.form-control:focus {\n  outline: none;\n  border-color: #e50914;\n  box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.1);\n}\n\n.form-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 2rem;\n}\n\n.btn {\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: 4px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.btn.primary {\n  background-color: #e50914;\n  color: white;\n}\n\n.btn.primary:hover {\n  background-color: #f40612;\n}\n\n.btn:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.forgot-password {\n  color: #666;\n  text-decoration: none;\n  font-size: 0.9rem;\n}\n\n.forgot-password:hover {\n  color: #e50914;\n  text-decoration: underline;\n}\n\n.alert {\n  padding: 1rem;\n  border-radius: 4px;\n  margin-bottom: 1.5rem;\n  font-weight: 500;\n}\n\n.alert-error {\n  background-color: #feeeed;\n  color: #e50914;\n  border: 1px solid #fcd0cd;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAY;;EADzBC,GAAA;EAEsBD,KAAK,EAAC;;;EAKjBA,KAAK,EAAC;AAAY;;EAWlBA,KAAK,EAAC;AAAY;;EAWlBA,KAAK,EAAC;AAAc;mBA7B/B;;;uBACEE,mBAAA,CAqCM,OArCNC,UAqCM,GApCOC,IAAA,CAAAC,KAAK,I,cAAhBH,mBAAA,CAEM,OAFNI,UAEM,EAAAC,gBAAA,CADDH,IAAA,CAAAC,KAAK,oBAHdG,mBAAA,gBAMIC,mBAAA,CA+BO;IA/BAC,QAAM,EAAAC,MAAA,QAAAA,MAAA,MANjBC,cAAA,KAAAC,IAAA,KAM2BC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;MAChCJ,mBAAA,CASM,OATNO,UASM,G,0BARJP,mBAAA,CAAgC;IAAzBQ,GAAG,EAAC;EAAO,GAAC,OAAK,sB,gBACxBR,mBAAA,CAME;IALAS,IAAI,EAAC,OAAO;IACZC,EAAE,EAAC,OAAO;IAXpB,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAYmBC,KAAA,CAAAC,WAAW,CAACC,KAAK,GAAAH,MAAA;IAC1BpB,KAAK,EAAC,cAAc;IACpBwB,QAAQ,EAAR;iDAFSH,KAAA,CAAAC,WAAW,CAACC,KAAK,E,KAM9Bd,mBAAA,CASM,OATNgB,UASM,G,0BARJhB,mBAAA,CAA0C;IAAnCQ,GAAG,EAAC;EAAU,GAAC,cAAY,sB,gBAClCR,mBAAA,CAME;IALAS,IAAI,EAAC,UAAU;IACfC,EAAE,EAAC,UAAU;IAtBvB,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAuBmBC,KAAA,CAAAC,WAAW,CAACI,QAAQ,GAAAN,MAAA;IAC7BpB,KAAK,EAAC,cAAc;IACpBwB,QAAQ,EAAR;iDAFSH,KAAA,CAAAC,WAAW,CAACI,QAAQ,E,KAMjCjB,mBAAA,CAOM,OAPNkB,UAOM,GANJlB,mBAAA,CAES;IAFDS,IAAI,EAAC,QAAQ;IAAClB,KAAK,EAAC,aAAa;IAAE4B,QAAQ,EAAExB,IAAA,CAAAyB;sBAChDzB,IAAA,CAAAyB,WAAW,mEA/BxBC,UAAA,GAiCQC,YAAA,CAEcC,sBAAA;IAFDC,EAAE,EAAC,iBAAiB;IAACjC,KAAK,EAAC;;IAjChDkC,OAAA,EAAAC,QAAA,CAiCkE,MAE1DxB,MAAA,QAAAA,MAAA,OAnCRyB,gBAAA,CAiCkE,yBAE1D,E;IAnCRC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}