{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, createVNode as _createVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"home\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"error-message\"\n};\nconst _hoisted_4 = {\n  key: 2,\n  class: \"no-results\"\n};\nconst _hoisted_5 = {\n  key: 3\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"search-results\"\n};\nconst _hoisted_7 = {\n  class: \"movie-grid\"\n};\nconst _hoisted_8 = {\n  class: \"popular-movies\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_10 = {\n  key: 1,\n  class: \"error-message\"\n};\nconst _hoisted_11 = {\n  key: 2,\n  class: \"movie-grid\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_MovieCard = _resolveComponent(\"MovieCard\");\n  const _component_Pagination = _resolveComponent(\"Pagination\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_ctx.searchLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _cache[2] || (_cache[2] = [_createElementVNode(\"div\", {\n    class: \"spinner\"\n  }, null, -1 /* HOISTED */), _createElementVNode(\"p\", null, \"Recherche des films...\", -1 /* HOISTED */)]))) : _ctx.searchError ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"p\", null, _toDisplayString(_ctx.searchError), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.retrySearch && $options.retrySearch(...args)),\n    class: \"btn\"\n  }, \"Réessayer\")])) : $data.isSearchMode && _ctx.searchResults.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"p\", null, \"Aucun résultat trouvé pour \\\"\" + _toDisplayString($data.currentSearchQuery) + \"\\\"\", 1 /* TEXT */)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createCommentVNode(\" Résultats de recherche \"), $data.isSearchMode ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"h2\", null, \"Résultats pour \\\"\" + _toDisplayString($data.currentSearchQuery) + \"\\\"\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.searchResults, movie => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: movie.imdbID,\n      class: \"movie-item\"\n    }, [_createVNode(_component_MovieCard, {\n      movie: movie,\n      onClick: $event => $options.goToMovie(movie.imdbID)\n    }, null, 8 /* PROPS */, [\"movie\", \"onClick\"])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _ctx.totalPages > 1 ? (_openBlock(), _createBlock(_component_Pagination, {\n    key: 0,\n    currentPage: _ctx.currentPage,\n    totalPages: _ctx.totalPages,\n    onPageChange: $options.changePage\n  }, null, 8 /* PROPS */, [\"currentPage\", \"totalPages\", \"onPageChange\"])) : _createCommentVNode(\"v-if\", true)])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Films populaires (affichés par défaut) \"), _createElementVNode(\"div\", _hoisted_8, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", null, \"Films populaires\", -1 /* HOISTED */)), _ctx.popularLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _cache[3] || (_cache[3] = [_createElementVNode(\"div\", {\n    class: \"spinner\"\n  }, null, -1 /* HOISTED */), _createElementVNode(\"p\", null, \"Chargement des films populaires...\", -1 /* HOISTED */)]))) : _ctx.popularError ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"p\", null, _toDisplayString(_ctx.popularError), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.loadPopularMovies && $options.loadPopularMovies(...args)),\n    class: \"btn\"\n  }, \"Réessayer\")])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.popularMovies, movie => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: movie.imdbID,\n      class: \"movie-item\"\n    }, [_createVNode(_component_MovieCard, {\n      movie: movie,\n      onClick: $event => $options.goToMovie(movie.imdbID)\n    }, null, 8 /* PROPS */, [\"movie\", \"onClick\"])]);\n  }), 128 /* KEYED_FRAGMENT */))])), _ctx.totalPages > 1 ? (_openBlock(), _createBlock(_component_Pagination, {\n    key: 3,\n    currentPage: _ctx.currentPage,\n    totalPages: _ctx.totalPages,\n    onPageChange: $options.changePage\n  }, null, 8 /* PROPS */, [\"currentPage\", \"totalPages\", \"onPageChange\"])) : _createCommentVNode(\"v-if\", true)])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_ctx","searchLoading","_hoisted_2","_cache","_createElementVNode","searchError","_hoisted_3","_toDisplayString","onClick","args","$options","retrySearch","$data","isSearchMode","searchResults","length","_hoisted_4","currentSearchQuery","_hoisted_5","_createCommentVNode","_hoisted_6","_hoisted_7","_Fragment","_renderList","movie","imdbID","_createVNode","_component_MovieCard","$event","goToMovie","totalPages","_createBlock","_component_Pagination","currentPage","onPageChange","changePage","_hoisted_8","popularLoading","_hoisted_9","popularError","_hoisted_10","loadPopularMovies","_hoisted_11","popularMovies"],"sources":["/Users/alandelaigue/Desktop/cinema-v2/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <div v-if=\"searchLoading\" class=\"loading\">\n      <div class=\"spinner\"></div>\n      <p>Recherche des films...</p>\n    </div>\n    \n    <div v-else-if=\"searchError\" class=\"error-message\">\n      <p>{{ searchError }}</p>\n      <button @click=\"retrySearch\" class=\"btn\">Réessayer</button>\n    </div>\n    \n    <div v-else-if=\"isSearchMode && searchResults.length === 0\" class=\"no-results\">\n      <p>Aucun résultat trouvé pour \"{{ currentSearchQuery }}\"</p>\n    </div>\n    \n    <div v-else>\n      <!-- Résultats de recherche -->\n      <div v-if=\"isSearchMode\" class=\"search-results\">\n        <h2>Résultats pour \"{{ currentSearchQuery }}\"</h2>\n        <div class=\"movie-grid\">\n          <div v-for=\"movie in searchResults\" :key=\"movie.imdbID\" class=\"movie-item\">\n            <MovieCard :movie=\"movie\" @click=\"goToMovie(movie.imdbID)\" />\n          </div>\n        </div>\n        \n        <Pagination \n          v-if=\"totalPages > 1\" \n          :currentPage=\"currentPage\" \n          :totalPages=\"totalPages\" \n          @page-change=\"changePage\"\n        />\n      </div>\n      \n      <!-- Films populaires (affichés par défaut) -->\n      <div v-else class=\"popular-movies\">\n        <h2>Films populaires</h2>\n        <div v-if=\"popularLoading\" class=\"loading\">\n          <div class=\"spinner\"></div>\n          <p>Chargement des films populaires...</p>\n        </div>\n        \n        <div v-else-if=\"popularError\" class=\"error-message\">\n          <p>{{ popularError }}</p>\n          <button @click=\"loadPopularMovies\" class=\"btn\">Réessayer</button>\n        </div>\n        \n        <div v-else class=\"movie-grid\">\n          <div v-for=\"movie in popularMovies\" :key=\"movie.imdbID\" class=\"movie-item\">\n            <MovieCard :movie=\"movie\" @click=\"goToMovie(movie.imdbID)\" />\n          </div>\n        </div>\n        \n        <Pagination \n          v-if=\"totalPages > 1\" \n          :currentPage=\"currentPage\" \n          :totalPages=\"totalPages\" \n          @page-change=\"changePage\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex'\nimport MovieCard from '@/components/MovieCard.vue'\nimport Pagination from '@/components/Pagination.vue'\n\nexport default {\n  name: 'HomeView',\n  components: {\n    MovieCard,\n    Pagination\n  },\n  data() {\n    return {\n      currentSearchQuery: '',\n      isSearchMode: false\n    }\n  },\n  computed: {\n    ...mapState('movies', [\n      'searchResults',\n      'searchLoading',\n      'searchError',\n      'popularMovies',\n      'popularLoading',\n      'popularError',\n      'totalResults',\n      'totalPages',\n      'currentPage'\n    ])\n  },\n  methods: {\n    ...mapActions('movies', [\n      'searchMovies',\n      'fetchPopularMovies'\n    ]),\n    \n    retrySearch() {\n      if (this.currentSearchQuery) {\n        this.searchMovies({ query: this.currentSearchQuery, page: 1 });\n      }\n    },\n    \n    async changePage(page) {\n      if (this.isSearchMode) {\n        await this.searchMovies({ query: this.currentSearchQuery, page });\n      } else {\n        await this.loadPopularMovies(page);\n      }\n      \n      // Remonter en haut de la page\n      window.scrollTo(0, 0);\n    },\n    \n    async loadPopularMovies(page = 1) {\n      try {\n        await this.fetchPopularMovies({ page });\n      } catch (error) {\n        console.error('Erreur lors du chargement des films populaires:', error);\n      }\n    },\n    \n    goToMovie(id) {\n      this.$router.push({ name: 'movie', params: { id } });\n    }\n  },\n  created() {\n    // Vérifier s'il y a une requête de recherche dans l'URL\n    const queryParam = this.$route.query.q;\n    \n    if (queryParam) {\n      // Si une requête est présente, mettre à jour l'état de recherche\n      this.currentSearchQuery = queryParam;\n      this.isSearchMode = true;\n      \n      // Forcer une recherche si nécessaire\n      if (this.searchResults.length === 0 && !this.searchLoading) {\n        this.searchMovies({ query: queryParam, page: 1 });\n      }\n    } else {\n      // Sinon, charger les films populaires\n      this.isSearchMode = false;\n      this.loadPopularMovies();\n    }\n  },\n  watch: {\n    // Surveiller les résultats de recherche pour mettre à jour l'interface\n    searchResults(newResults) {\n      if (newResults && newResults.length > 0) {\n        this.isSearchMode = true;\n      }\n    },\n    \n    // Surveiller les changements dans les paramètres de l'URL\n    '$route.query.q'(newQuery) {\n      if (newQuery) {\n        this.currentSearchQuery = newQuery;\n        this.isSearchMode = true;\n      } else {\n        // Si le paramètre de recherche est retiré, revenir aux films populaires\n        this.isSearchMode = false;\n        this.currentSearchQuery = '';\n        this.loadPopularMovies();\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.home {\n  width: 100%;\n}\n\n.movie-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 2rem;\n  margin-top: 2rem;\n}\n\n.movie-item {\n  height: 100%;\n}\n\n.search-results h2, .popular-movies h2 {\n  font-size: 1.8rem;\n  color: #333;\n  margin-bottom: 1rem;\n  border-bottom: 2px solid #e50914;\n  padding-bottom: 0.5rem;\n}\n\n.loading {\n  text-align: center;\n  padding: 3rem 0;\n}\n\n.spinner {\n  display: inline-block;\n  width: 50px;\n  height: 50px;\n  border: 5px solid rgba(229, 9, 20, 0.3);\n  border-radius: 50%;\n  border-top-color: #e50914;\n  animation: spin 1s ease-in-out infinite;\n  margin-bottom: 1rem;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.error-message, .no-results {\n  text-align: center;\n  padding: 3rem 0;\n  background-color: #f9f9f9;\n  border-radius: 8px;\n  margin-top: 2rem;\n}\n\n.error-message p, .no-results p {\n  margin-bottom: 1rem;\n  color: #666;\n}\n\n@media (max-width: 768px) {\n  .movie-grid {\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    gap: 1.5rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .movie-grid {\n    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));\n    gap: 1rem;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}