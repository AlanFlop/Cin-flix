{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport TicketBooking from '@/components/TicketBooking.vue';\nimport { mapState, mapActions, mapGetters } from 'vuex';\nexport default {\n  name: 'MovieDetails',\n  components: {\n    TicketBooking\n  },\n  data() {\n    return {\n      showBookingForm: false,\n      selectedReview: null,\n      selectedActor: null,\n      newReview: {\n        rating: 0,\n        content: ''\n      },\n      isSubmitting: false,\n      isFavorite: false,\n      notFoundImage: '/images/placeholder-movie.jpg'\n    };\n  },\n  computed: {\n    ...mapGetters('auth', ['isLoggedIn', 'currentUser']),\n    ...mapState('movies', {\n      movie: 'currentMovie',\n      loading: 'detailsLoading',\n      error: 'detailsError'\n    }),\n    movieGenres() {\n      return this.movie && this.movie.Genre ? this.movie.Genre.split(', ') : [];\n    },\n    trailerKey() {\n      if (this.movie && this.movie.videos && this.movie.videos.length) {\n        const trailer = this.movie.videos.find(video => video.type === 'Trailer' && video.site === 'YouTube');\n        return trailer ? trailer.key : null;\n      }\n      return null;\n    }\n  },\n  methods: {\n    ...mapActions('movies', ['fetchMovieDetails', 'addFavorite', 'removeFavorite']),\n    ...mapActions('cart', ['addToCart']),\n    ...mapActions('reviews', ['submitMovieReview']),\n    bookTicket(ticket) {\n      console.log('Ticket r√©serv√© avec succ√®s:', ticket);\n\n      /* this.addToCart({\n         movieId: this.movie.imdbID,\n         movieTitle: this.movie.Title,\n         moviePoster: this.movie.Poster,\n         ...ticket\n       });*/\n\n      // Fermer le modal\n      this.showBookingForm = false;\n\n      // Rediriger vers le panier\n      this.$router.push('/cart');\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      };\n      return new Date(dateString).toLocaleDateString('fr-FR', options);\n    },\n    expandReview(review) {\n      this.selectedReview = review;\n    },\n    async showActorInfo(actor) {\n      this.selectedActor = actor;\n\n      // Charger plus d'informations sur l'acteur si n√©cessaire\n      if (!actor.biography && this.isLoggedIn) {\n        try {\n          const actorDetails = await this.$store.dispatch('movies/fetchActorDetails', actor.id);\n          this.selectedActor = {\n            ...this.selectedActor,\n            ...actorDetails\n          };\n        } catch (error) {\n          console.error('Erreur lors du chargement des d√©tails de l\\'acteur:', error);\n        }\n      }\n    },\n    goToMovie(movieId) {\n      // Rediriger vers la page du film en utilisant l'ID TMDB\n      this.$router.push({\n        name: 'movie',\n        params: {\n          id: movieId\n        }\n      });\n    },\n    async submitReview() {\n      if (!this.isLoggedIn) {\n        this.$router.push(`/login?redirect=movie&id=${this.$route.params.id}`);\n        return;\n      }\n      if (this.newReview.rating === 0) {\n        this.$toasted.error('Veuillez attribuer une note au film');\n        return;\n      }\n      this.isSubmitting = true;\n      try {\n        await this.submitMovieReview({\n          movieId: this.movie.imdbID,\n          review: this.newReview\n        });\n\n        // Rafra√Æchir les d√©tails du film pour obtenir le nouvel avis\n        await this.fetchMovieDetails(this.movie.imdbID);\n\n        // R√©initialiser le formulaire\n        this.newReview = {\n          rating: 0,\n          content: ''\n        };\n        this.$toasted.success('Votre avis a √©t√© publi√© avec succ√®s');\n      } catch (error) {\n        console.error('Erreur lors de la soumission de l\\'avis:', error);\n        this.$toasted.error('Une erreur est survenue lors de la publication de votre avis');\n      } finally {\n        this.isSubmitting = false;\n      }\n    },\n    async toggleFavorite() {\n      if (!this.isLoggedIn) {\n        this.$router.push(`/login?redirect=movie&id=${this.$route.params.id}`);\n        return;\n      }\n      try {\n        if (this.isFavorite) {\n          await this.removeFavorite(this.movie.imdbID);\n          this.isFavorite = false;\n          this.$toasted.show('Film retir√© des favoris');\n        } else {\n          await this.addFavorite({\n            movieId: this.movie.imdbID,\n            title: this.movie.Title,\n            poster: this.movie.Poster,\n            year: this.movie.Year\n          });\n          this.isFavorite = true;\n          this.$toasted.show('Film ajout√© aux favoris');\n        }\n      } catch (error) {\n        console.error('Erreur lors de la mise √† jour des favoris:', error);\n        this.$toasted.error('Une erreur est survenue');\n      }\n    },\n    handleImageError(e) {\n      e.target.src = this.notFoundImage;\n    },\n    async checkFavoriteStatus() {\n      if (!this.isLoggedIn || !this.movie) return;\n      try {\n        const favorites = await this.$store.dispatch('movies/getFavorites');\n        this.isFavorite = favorites.some(fav => fav.movieId === this.movie.imdbID);\n      } catch (error) {\n        console.error('Erreur lors de la v√©rification des favoris:', error);\n      }\n    }\n  },\n  watch: {\n    movie() {\n      // V√©rifier si le film est dans les favoris quand le film change\n      this.checkFavoriteStatus();\n\n      // R√©initialiser l'√©tat des modals\n      this.selectedReview = null;\n      this.selectedActor = null;\n\n      // Scroll en haut de la page\n      window.scrollTo(0, 0);\n    }\n  },\n  created() {\n    const movieId = this.$route.params.id;\n    console.log('MovieDetails created - ID:', movieId);\n    console.log('√âtat de connexion:', this.isLoggedIn);\n    if (movieId) {\n      console.log('Appel de fetchMovieDetails avec ID:', movieId);\n      this.fetchMovieDetails(movieId).then(movie => {\n        console.log('Film charg√© avec succ√®s:', movie);\n        this.checkFavoriteStatus();\n      }).catch(error => {\n        console.error('Erreur lors du chargement du film:', error);\n      });\n    } else {\n      console.warn('Aucun ID de film trouv√© dans les param√®tres de route');\n    }\n  }\n};","map":{"version":3,"names":["TicketBooking","mapState","mapActions","mapGetters","name","components","data","showBookingForm","selectedReview","selectedActor","newReview","rating","content","isSubmitting","isFavorite","notFoundImage","computed","movie","loading","error","movieGenres","Genre","split","trailerKey","videos","length","trailer","find","video","type","site","key","methods","bookTicket","ticket","console","log","$router","push","formatDate","dateString","options","year","month","day","Date","toLocaleDateString","expandReview","review","showActorInfo","actor","biography","isLoggedIn","actorDetails","$store","dispatch","id","goToMovie","movieId","params","submitReview","$route","$toasted","submitMovieReview","imdbID","fetchMovieDetails","success","toggleFavorite","removeFavorite","show","addFavorite","title","Title","poster","Poster","Year","handleImageError","e","target","src","checkFavoriteStatus","favorites","some","fav","watch","window","scrollTo","created","then","catch","warn"],"sources":["/Users/alandelaigue/Desktop/cinema-v2/src/components/MovieDetails.vue"],"sourcesContent":["<template>\n  <div class=\"movie-details\">\n    <div v-if=\"loading\" class=\"loading\">\n      <div class=\"spinner\"></div>\n      <p>Chargement des d√©tails du film...</p>\n    </div>\n    \n    <div v-else-if=\"error\" class=\"error\">\n      <p>{{ error }}</p>\n      <button @click=\"fetchMovieDetails\" class=\"btn\">R√©essayer</button>\n      <router-link to=\"/\" class=\"btn secondary\">Retour √† l'accueil</router-link>\n    </div>\n    \n    <div v-else-if=\"movie\" class=\"movie-content\">\n      <!-- En-t√™te avec backdrop -->\n      <div class=\"movie-backdrop\" v-if=\"movie.backdrop\">\n        <img :src=\"movie.backdrop\" :alt=\"movie.Title\" />\n        <div class=\"backdrop-gradient\"></div>\n      </div>\n      \n      <div class=\"movie-header\">\n        <div class=\"poster-container\">\n          <img \n            :src=\"movie.Poster !== 'N/A' ? movie.Poster : '/images/placeholder-movie.jpg'\" \n            :alt=\"movie.Title\" \n            class=\"movie-poster\"\n            @error=\"handleImageError\"\n          />\n        </div>\n        \n        <div class=\"movie-info\">\n          <h1 class=\"movie-title\">{{ movie.Title }}</h1>\n          <p class=\"movie-meta\">{{ movie.Year }} | {{ movie.Runtime }} | {{ movie.Rated }}</p>\n          \n          <div class=\"movie-genres\">\n            <span v-for=\"(genre, index) in movieGenres\" :key=\"index\" class=\"genre-tag\">\n              {{ genre }}\n            </span>\n          </div>\n          \n          <div class=\"movie-ratings\">\n            <div v-for=\"(rating, index) in movie.Ratings\" :key=\"index\" class=\"rating\">\n              <span class=\"rating-source\">{{ rating.Source }}:</span>\n              <span class=\"rating-value\">{{ rating.Value }}</span>\n            </div>\n          </div>\n          \n          <div class=\"movie-crew\">\n            <p><strong>R√©alisateur:</strong> {{ movie.Director }}</p>\n            <p><strong>Sc√©nariste:</strong> {{ movie.Writer }}</p>\n            <p><strong>Acteurs:</strong> {{ movie.Actors }}</p>\n          </div>\n          \n          <div class=\"movie-actions\">\n            <button \n              v-if=\"isLoggedIn\" \n              @click=\"showBookingForm = true\" \n              class=\"btn booking-btn\"\n            >\n              <span class=\"icon\">üéüÔ∏è</span> R√©server une s√©ance\n            </button>\n            <button\n              v-if=\"isLoggedIn\"\n              @click=\"toggleFavorite\"\n              class=\"btn favorite-btn\"\n              :class=\"{ 'is-favorite': isFavorite }\"\n            >\n              <span class=\"icon\">{{ isFavorite ? '‚ù§Ô∏è' : 'ü§ç' }}</span>\n              {{ isFavorite ? 'Retirer des favoris' : 'Ajouter aux favoris' }}\n            </button>\n            <router-link v-if=\"!isLoggedIn\" :to=\"`/login?redirect=movie&id=${$route.params.id}`\" class=\"btn secondary\">\n              Connectez-vous pour r√©server\n            </router-link>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"movie-synopsis\">\n        <h2>Synopsis</h2>\n        <p>{{ movie.Plot }}</p>\n      </div>\n      \n      <!-- Bande-annonce -->\n      <div v-if=\"trailerKey\" class=\"movie-trailer\">\n        <h2>Bande-annonce</h2>\n        <div class=\"video-container\">\n          <iframe \n            :src=\"`https://www.youtube.com/embed/${trailerKey}`\" \n            frameborder=\"0\" \n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" \n            allowfullscreen\n          ></iframe>\n        </div>\n      </div>\n      \n      <!-- Casting -->\n      <div v-if=\"movie.cast && movie.cast.length\" class=\"movie-cast\">\n        <h2>Casting</h2>\n        <div class=\"cast-grid\">\n          <div \n            v-for=\"actor in movie.cast.slice(0, 6)\" \n            :key=\"actor.id\" \n            class=\"cast-card\"\n            @click=\"showActorInfo(actor)\"\n          >\n            <img \n              :src=\"actor.profile_path ? `https://image.tmdb.org/t/p/w185${actor.profile_path}` : '/images/placeholder-person.jpg'\" \n              :alt=\"actor.name\" \n              @error=\"handleImageError\"\n            />\n            <div class=\"cast-info\">\n              <p class=\"actor-name\">{{ actor.name }}</p>\n              <p class=\"character-name\">{{ actor.character }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Films similaires -->\n      <div v-if=\"movie.similar && movie.similar.length\" class=\"similar-movies\">\n        <h2>Films similaires</h2>\n        <div class=\"similar-carousel\">\n          <div \n            v-for=\"similarMovie in movie.similar.slice(0, 6)\" \n            :key=\"similarMovie.id\" \n            class=\"similar-movie\" \n            @click=\"goToMovie(similarMovie.id)\"\n          >\n            <img \n              :src=\"similarMovie.poster_path ? `https://image.tmdb.org/t/p/w185${similarMovie.poster_path}` : '/images/placeholder-movie.jpg'\" \n              :alt=\"similarMovie.title\" \n              @error=\"handleImageError\"\n            />\n            <div class=\"similar-info\">\n              <p class=\"similar-title\">{{ similarMovie.title }}</p>\n              <p class=\"similar-year\">{{ new Date(similarMovie.release_date).getFullYear() }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Avis -->\n      <div class=\"movie-reviews\">\n        <h2>Avis des spectateurs</h2>\n        \n        <!-- Section pour ajouter un avis -->\n        <div v-if=\"isLoggedIn\" class=\"add-review\">\n          <form @submit.prevent=\"submitReview\" class=\"review-form\">\n            <div class=\"rating-input\">\n              <span>Votre note :</span>\n              <div class=\"star-rating\">\n                <span\n                  v-for=\"star in 5\"\n                  :key=\"star\"\n                  class=\"star\"\n                  :class=\"{ 'active': star <= newReview.rating }\"\n                  @click=\"newReview.rating = star\"\n                >‚òÖ</span>\n              </div>\n            </div>\n            \n            <div class=\"form-group\">\n              <label for=\"review-content\">Votre avis :</label>\n              <textarea\n                id=\"review-content\"\n                v-model=\"newReview.content\"\n                rows=\"4\"\n                placeholder=\"Partagez votre opinion sur ce film...\"\n                required\n              ></textarea>\n            </div>\n            \n            <button type=\"submit\" class=\"btn\" :disabled=\"isSubmitting\">\n              {{ isSubmitting ? 'Envoi en cours...' : 'Publier' }}\n            </button>\n          </form>\n        </div>\n        \n        <!-- Liste des avis -->\n        <div v-if=\"movie.reviews && movie.reviews.length\" class=\"reviews-list\">\n          <div v-for=\"review in movie.reviews\" :key=\"review.id\" class=\"review-card\">\n            <div class=\"review-header\">\n              <div class=\"user-info\">\n                <div class=\"avatar\" v-if=\"!review.author_details?.avatar_path\">\n                  {{ review.author ? review.author.charAt(0).toUpperCase() : 'U' }}\n                </div>\n                <img \n                  v-else \n                  :src=\"`https://image.tmdb.org/t/p/w45${review.author_details.avatar_path}`\" \n                  class=\"avatar-img\" \n                  @error=\"handleImageError\"\n                />\n                <div class=\"user-details\">\n                  <p class=\"username\">{{ review.author || 'Utilisateur' }}</p>\n                  <p class=\"review-date\">{{ formatDate(review.created_at) }}</p>\n                </div>\n              </div>\n              <div class=\"review-rating\" v-if=\"review.author_details?.rating\">\n                <span class=\"star\">‚òÖ</span>\n                <span>{{ review.author_details.rating }}/10</span>\n              </div>\n            </div>\n            \n            <p class=\"review-text\">\n              {{ review.content && review.content.length > 300 \n                ? review.content.substring(0, 300) + '...' \n                : (review.content || '') }}\n            </p>\n            \n            <button \n              v-if=\"review.content && review.content.length > 300\" \n              @click=\"expandReview(review)\"\n              class=\"read-more\"\n            >\n              Lire la suite\n            </button>\n          </div>\n        </div>\n        \n        <div v-else class=\"no-reviews\">\n          <p>Aucun avis pour le moment. Soyez le premier √† donner votre opinion !</p>\n        </div>\n        \n        <div class=\"login-prompt\" v-if=\"!isLoggedIn\">\n          <router-link :to=\"`/login?redirect=movie&id=${$route.params.id}`\" class=\"btn secondary\">\n            Connectez-vous pour laisser un avis\n          </router-link>\n        </div>\n      </div>\n      \n      <!-- Modal de r√©servation -->\n      <TicketBooking \n        v-if=\"showBookingForm\" \n        :movie=\"movie\"\n        :is-authenticated=\"isLoggedIn\"\n        @close=\"showBookingForm = false\"\n        @book=\"bookTicket\"\n      />\n      \n      <!-- Modal d'affichage d'un avis complet -->\n      <div v-if=\"selectedReview\" class=\"modal-overlay\" @click.self=\"selectedReview = null\">\n        <div class=\"modal-content review-modal\">\n          <div class=\"modal-header\">\n            <h3>Avis de {{ selectedReview.author }}</h3>\n            <button @click=\"selectedReview = null\" class=\"close-btn\">&times;</button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"review-header\">\n              <div class=\"user-info\">\n                <div class=\"avatar\" v-if=\"!selectedReview.author_details?.avatar_path\">\n                  {{ selectedReview.author ? selectedReview.author.charAt(0).toUpperCase() : 'U' }}\n                </div>\n                <img \n                  v-else \n                  :src=\"`https://image.tmdb.org/t/p/w45${selectedReview.author_details.avatar_path}`\" \n                  class=\"avatar-img\" \n                />\n                <div class=\"user-details\">\n                  <p class=\"username\">{{ selectedReview.author || 'Utilisateur' }}</p>\n                  <p class=\"review-date\">{{ formatDate(selectedReview.created_at) }}</p>\n                </div>\n              </div>\n              <div class=\"review-rating\" v-if=\"selectedReview.author_details?.rating\">\n                <span class=\"star\">‚òÖ</span>\n                <span>{{ selectedReview.author_details.rating }}/10</span>\n              </div>\n            </div>\n            <p class=\"review-text full-review\">{{ selectedReview.content }}</p>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Modal d'affichage des informations d'un acteur -->\n      <div v-if=\"selectedActor\" class=\"modal-overlay\" @click.self=\"selectedActor = null\">\n        <div class=\"modal-content actor-modal\">\n          <div class=\"modal-header\">\n            <h3>{{ selectedActor.name }}</h3>\n            <button @click=\"selectedActor = null\" class=\"close-btn\">&times;</button>\n          </div>\n          <div class=\"modal-body actor-details\">\n            <div class=\"actor-profile\">\n              <img \n                :src=\"selectedActor.profile_path ? `https://image.tmdb.org/t/p/w300${selectedActor.profile_path}` : '/images/placeholder-person.jpg'\" \n                :alt=\"selectedActor.name\" \n              />\n              <div class=\"actor-info\">\n                <p v-if=\"selectedActor.birthday\"><strong>Date de naissance:</strong> {{ formatDate(selectedActor.birthday) }}</p>\n                <p v-if=\"selectedActor.place_of_birth\"><strong>Lieu de naissance:</strong> {{ selectedActor.place_of_birth }}</p>\n                <p><strong>R√¥le dans ce film:</strong> {{ selectedActor.character }}</p>\n              </div>\n            </div>\n            <div v-if=\"selectedActor.biography\" class=\"actor-bio\">\n              <h4>Biographie</h4>\n              <p>{{ selectedActor.biography }}</p>\n            </div>\n            <div v-if=\"selectedActor.known_for && selectedActor.known_for.length\" class=\"actor-filmography\">\n              <h4>Connu pour</h4>\n              <div class=\"filmography-grid\">\n                <div \n                  v-for=\"film in selectedActor.known_for.slice(0, 4)\" \n                  :key=\"film.id\" \n                  class=\"filmography-item\"\n                  @click=\"goToMovie(film.id)\"\n                >\n                  <img \n                    :src=\"film.poster_path ? `https://image.tmdb.org/t/p/w92${film.poster_path}` : '/images/placeholder-movie.jpg'\" \n                    :alt=\"film.title || film.name\" \n                  />\n                  <p>{{ film.title || film.name }}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TicketBooking from '@/components/TicketBooking.vue'\nimport { mapState, mapActions, mapGetters } from 'vuex'\n\nexport default {\n  name: 'MovieDetails',\n  components: {\n    TicketBooking\n  },\n  data() {\n    return {\n      showBookingForm: false,\n      selectedReview: null,\n      selectedActor: null,\n      newReview: {\n        rating: 0,\n        content: ''\n      },\n      isSubmitting: false,\n      isFavorite: false,\n      notFoundImage: '/images/placeholder-movie.jpg'\n    }\n  },\n  computed: {\n    ...mapGetters('auth', ['isLoggedIn', 'currentUser']),\n    ...mapState('movies', {\n      movie: 'currentMovie',\n      loading: 'detailsLoading',\n      error: 'detailsError'\n    }),\n    movieGenres() {\n      return this.movie && this.movie.Genre \n        ? this.movie.Genre.split(', ') \n        : []\n    },\n    trailerKey() {\n      if (this.movie && this.movie.videos && this.movie.videos.length) {\n        const trailer = this.movie.videos.find(video => \n          video.type === 'Trailer' && video.site === 'YouTube'\n        );\n        return trailer ? trailer.key : null;\n      }\n      return null;\n    }\n  },\n  methods: {\n    ...mapActions('movies', ['fetchMovieDetails', 'addFavorite', 'removeFavorite']),\n    ...mapActions('cart', ['addToCart']),\n    ...mapActions('reviews', ['submitMovieReview']),\n    \n    bookTicket(ticket) {\n      console.log('Ticket r√©serv√© avec succ√®s:', ticket);\n      \n     /* this.addToCart({\n        movieId: this.movie.imdbID,\n        movieTitle: this.movie.Title,\n        moviePoster: this.movie.Poster,\n        ...ticket\n      });*/\n      \n      // Fermer le modal\n      this.showBookingForm = false;\n      \n      // Rediriger vers le panier\n      this.$router.push('/cart');\n    },\n    \n    formatDate(dateString) {\n      if (!dateString) return '';\n      const options = { year: 'numeric', month: 'long', day: 'numeric' };\n      return new Date(dateString).toLocaleDateString('fr-FR', options);\n    },\n    \n    expandReview(review) {\n      this.selectedReview = review;\n    },\n    \n    async showActorInfo(actor) {\n      this.selectedActor = actor;\n      \n      // Charger plus d'informations sur l'acteur si n√©cessaire\n      if (!actor.biography && this.isLoggedIn) {\n        try {\n          const actorDetails = await this.$store.dispatch('movies/fetchActorDetails', actor.id);\n          this.selectedActor = { ...this.selectedActor, ...actorDetails };\n        } catch (error) {\n          console.error('Erreur lors du chargement des d√©tails de l\\'acteur:', error);\n        }\n      }\n    },\n    \n    goToMovie(movieId) {\n      // Rediriger vers la page du film en utilisant l'ID TMDB\n      this.$router.push({ name: 'movie', params: { id: movieId } });\n    },\n    \n    async submitReview() {\n      if (!this.isLoggedIn) {\n        this.$router.push(`/login?redirect=movie&id=${this.$route.params.id}`);\n        return;\n      }\n      \n      if (this.newReview.rating === 0) {\n        this.$toasted.error('Veuillez attribuer une note au film');\n        return;\n      }\n      \n      this.isSubmitting = true;\n      \n      try {\n        await this.submitMovieReview({\n          movieId: this.movie.imdbID,\n          review: this.newReview\n        });\n        \n        // Rafra√Æchir les d√©tails du film pour obtenir le nouvel avis\n        await this.fetchMovieDetails(this.movie.imdbID);\n        \n        // R√©initialiser le formulaire\n        this.newReview = {\n          rating: 0,\n          content: ''\n        };\n        \n        this.$toasted.success('Votre avis a √©t√© publi√© avec succ√®s');\n      } catch (error) {\n        console.error('Erreur lors de la soumission de l\\'avis:', error);\n        this.$toasted.error('Une erreur est survenue lors de la publication de votre avis');\n      } finally {\n        this.isSubmitting = false;\n      }\n    },\n    \n    async toggleFavorite() {\n      if (!this.isLoggedIn) {\n        this.$router.push(`/login?redirect=movie&id=${this.$route.params.id}`);\n        return;\n      }\n      \n      try {\n        if (this.isFavorite) {\n          await this.removeFavorite(this.movie.imdbID);\n          this.isFavorite = false;\n          this.$toasted.show('Film retir√© des favoris');\n        } else {\n          await this.addFavorite({\n            movieId: this.movie.imdbID,\n            title: this.movie.Title,\n            poster: this.movie.Poster,\n            year: this.movie.Year\n          });\n          this.isFavorite = true;\n          this.$toasted.show('Film ajout√© aux favoris');\n        }\n      } catch (error) {\n        console.error('Erreur lors de la mise √† jour des favoris:', error);\n        this.$toasted.error('Une erreur est survenue');\n      }\n    },\n    \n    handleImageError(e) {\n      e.target.src = this.notFoundImage;\n    },\n    \n    async checkFavoriteStatus() {\n      if (!this.isLoggedIn || !this.movie) return;\n      \n      try {\n        const favorites = await this.$store.dispatch('movies/getFavorites');\n        this.isFavorite = favorites.some(fav => fav.movieId === this.movie.imdbID);\n      } catch (error) {\n        console.error('Erreur lors de la v√©rification des favoris:', error);\n      }\n    }\n  },\n  watch: {\n    movie() {\n      // V√©rifier si le film est dans les favoris quand le film change\n      this.checkFavoriteStatus();\n      \n      // R√©initialiser l'√©tat des modals\n      this.selectedReview = null;\n      this.selectedActor = null;\n      \n      // Scroll en haut de la page\n      window.scrollTo(0, 0);\n    }\n  },\n  created() {\n    const movieId = this.$route.params.id;\n    console.log('MovieDetails created - ID:', movieId);\n    console.log('√âtat de connexion:', this.isLoggedIn);\n    \n    if (movieId) {\n      console.log('Appel de fetchMovieDetails avec ID:', movieId);\n      this.fetchMovieDetails(movieId)\n        .then(movie => {\n          console.log('Film charg√© avec succ√®s:', movie);\n          this.checkFavoriteStatus();\n        })\n        .catch(error => {\n          console.error('Erreur lors du chargement du film:', error);\n        });\n    } else {\n      console.warn('Aucun ID de film trouv√© dans les param√®tres de route');\n    }\n  }\n}\n</script>\n\n<style scoped>\n.movie-details {\n  padding: 1rem 0;\n}\n\n.movie-content {\n  background-color: white;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.movie-backdrop {\n  width: 100%;\n  height: 400px;\n  position: relative;\n  overflow: hidden;\n}\n\n.movie-backdrop img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  object-position: center 20%;\n}\n\n.backdrop-gradient {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 150px;\n  background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.7) 100%);\n}\n\n.movie-header {\n  display: flex;\n  padding: 2rem;\n  background-color: #f9f9f9;\n}\n\n.poster-container {\n  flex: 0 0 300px;\n  margin-right: 2rem;\n}\n\n.movie-poster {\n  width: 100%;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n\n.movie-info {\n  flex: 1;\n}\n\n.movie-title {\n  font-size: 2rem;\n  margin-bottom: 0.5rem;\n  color: #333;\n}\n\n.movie-meta {\n  color: #666;\n  margin-bottom: 1rem;\n}\n\n.movie-genres {\n  display: flex;\n  flex-wrap: wrap;\n  margin-bottom: 1.5rem;\n}\n\n.genre-tag {\n  background-color: #e50914;\n  color: white;\n  padding: 0.3rem 0.8rem;\n  border-radius: 50px;\n  font-size: 0.8rem;\n  margin-right: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n\n.movie-ratings {\n  margin-bottom: 1.5rem;\n}\n\n.rating {\n  display: inline-block;\n  margin-right: 1.5rem;\n  margin-bottom: 0.5rem;\n}\n\n.rating-source {\n  font-weight: bold;\n  margin-right: 0.3rem;\n}\n\n.movie-crew {\n  margin-bottom: 1.5rem;\n  line-height: 1.6;\n}\n\n.movie-actions {\n  margin-top: 2rem;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n\n.movie-actions .btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.booking-btn {\n  background-color: #e50914;\n}\n\n.booking-btn:hover {\n  background-color: #f40612;\n}\n\n.favorite-btn {\n  background-color: #333;\n}\n\n.favorite-btn:hover {\n  background-color: #555;\n}\n\n.favorite-btn.is-favorite {\n  background-color: #e50914;\n}\n\n.favorite-btn.is-favorite:hover {\n  background-color: #f40612;\n}\n\n.movie-synopsis, .movie-reviews, .movie-trailer, .movie-cast, .similar-movies {\n  padding: 2rem;\n  border-top: 1px solid #eee;\n}\n\n.movie-synopsis h2, .movie-reviews h2, .movie-trailer h2, .movie-cast h2, .similar-movies h2 {\n  margin-bottom: 1rem;\n  color: #333;\n}\n\n.movie-synopsis p {\n  line-height: 1.6;\n  color: #444;\n}\n\n.video-container {\n  position: relative;\n  padding-bottom: 56.25%; /* 16:9 */\n  height: 0;\n  overflow: hidden;\n  margin-top: 1rem;\n}\n\n.video-container iframe {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.cast-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  gap: 1.5rem;\n  margin-top: 1rem;\n}\n\n.cast-card {\n  background-color: #f9f9f9;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  cursor: pointer;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.cast-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\n}\n\n.cast-card img {\n  width: 100%;\n  height: 225px;\n  object-fit: cover;\n}\n\n.cast-info {\n  padding: 0.8rem;\n}\n\n.actor-name {\n  font-weight: 600;\n  margin-bottom: 0.3rem;\n}\n\n.character-name {\n  font-size: 0.9rem;\n  color: #666;\n}\n\n.similar-carousel {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  gap: 1.5rem;\n  margin-top: 1rem;\n}\n\n.similar-movie {\n  background-color: #f9f9f9;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  cursor: pointer;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.similar-movie:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\n}\n\n.similar-movie img {\n  width: 100%;\n  height: 225px;\n  object-fit: cover;\n}\n\n.similar-info {\n  padding: 0.8rem;\n}\n\n.similar-title {\n  font-weight: 600;\n  margin-bottom: 0.3rem;\n}\n\n.similar-year {\n  font-size: 0.9rem;\n  color: #666;\n}\n\n.add-review {\n  margin-bottom: 2rem;\n  background-color: #f9f9f9;\n  padding: 1.5rem;\n  border-radius: 8px;\n}\n\n.review-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.rating-input {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.star-rating {\n  display: flex;\n  gap: 0.2rem;\n}\n\n.star {\n  font-size: 1.5rem;\n  color: #ddd;\n  cursor: pointer;\n}\n\n.star:hover, .star.active {\n  color: #f5c518;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\ntextarea {\n  padding: 0.8rem;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 1rem;\n  resize: vertical;\n  min-height: 100px;\n}\n\ntextarea:focus {\n  outline: none;\n  border-color: #e50914;\n  box-shadow: 0 0 0 2px rgba(229, 9, 20, 0.2);\n}\n\n.reviews-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.review-card {\n  background-color: #f9f9f9;\n  padding: 1.5rem;\n  border-radius: 8px;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.review-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  gap: 0.8rem;\n}\n\n.avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background-color: #e50914;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n}\n\n.avatar-img {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.user-details {\n  display: flex;\n  flex-direction: column;\n}\n\n.username {\n  font-weight: 600;\n  margin-bottom: 0.2rem;\n}\n\n.review-date {\n  font-size: 0.8rem;\n  color: #777;\n}\n\n.review-rating {\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  font-weight: 600;\n}\n\n.review-rating .star {\n  color: #f5c518;\n  font-size: 1.2rem;\n  cursor: default;\n}\n\n.review-text {\n  line-height: 1.6;\n  color: #444;\n  margin-bottom: 0.5rem;\n}\n\n.read-more {\n  background: none;\n  border: none;\n  color: #e50914;\n  padding: 0;\n  cursor: pointer;\n  text-decoration: underline;\n  font-size: 0.9rem;\n}\n\n.read-more:hover {\n  color: #f40612;\n}\n\n.no-reviews {\n  text-align: center;\n  padding: 2rem;\n  background-color: #f9f9f9;\n  border-radius: 8px;\n  color: #666;\n}\n\n.login-prompt {\n  margin-top: 1.5rem;\n  text-align: center;\n  padding: 1.5rem;\n  background-color: #f9f9f9;\n  border-radius: 8px;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  padding: 1rem;\n}\n\n.modal-content {\n  background-color: white;\n  border-radius: 8px;\n  width: 100%;\n  max-width: 600px;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  border-bottom: 1px solid #eee;\n}\n\n.modal-header h3 {\n  margin: 0;\n  font-size: 1.5rem;\n  color: #333;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: #777;\n}\n\n.close-btn:hover {\n  color: #333;\n}\n\n.modal-body {\n  padding: 1.5rem;\n}\n\n.full-review {\n  white-space: pre-line;\n}\n\n.actor-details {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.actor-profile {\n  display: flex;\n  gap: 1.5rem;\n}\n\n.actor-profile img {\n  width: 150px;\n  height: auto;\n  border-radius: 8px;\n  object-fit: cover;\n}\n\n.actor-info {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n}\n\n.actor-bio h4, .actor-filmography h4 {\n  margin-bottom: 0.8rem;\n  color: #333;\n}\n\n.actor-bio p {\n  line-height: 1.6;\n  color: #444;\n}\n\n.filmography-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\n  gap: 1rem;\n}\n\n.filmography-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  cursor: pointer;\n}\n\n.filmography-item img {\n  width: 92px;\n  height: 138px;\n  border-radius: 4px;\n  margin-bottom: 0.5rem;\n  object-fit: cover;\n}\n\n.filmography-item p {\n  font-size: 0.8rem;\n  max-width: 92px;\n}\n\n.loading {\n  text-align: center;\n  padding: 3rem 0;\n}\n\n.spinner {\n  display: inline-block;\n  width: 50px;\n  height: 50px;\n  border: 5px solid rgba(229, 9, 20, 0.3);\n  border-radius: 50%;\n  border-top-color: #e50914;\n  animation: spin 1s ease-in-out infinite;\n  margin-bottom: 1rem;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.error {\n  text-align: center;\n  padding: 3rem 0;\n}\n\n.error p {\n  margin-bottom: 1rem;\n  color: #666;\n}\n\n.btn {\n  padding: 0.7rem 1.2rem;\n  background-color: #e50914;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  text-decoration: none;\n  display: inline-block;\n  text-align: center;\n}\n\n.btn:hover {\n  background-color: #f40612;\n}\n\n.btn:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.btn.secondary {\n  background-color: #333;\n}\n\n.btn.secondary:hover {\n  background-color: #555;\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .movie-header {\n    flex-direction: column;\n  }\n  \n  .poster-container {\n    flex: 0 0 auto;\n    margin-right: 0;\n    margin-bottom: 2rem;\n    max-width: 250px;\n    margin: 0 auto 2rem;\n  }\n  \n  .movie-synopsis, .movie-reviews, .movie-trailer, .movie-cast, .similar-movies {\n    padding: 1.5rem;\n  }\n  \n  .actor-profile {\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n  }\n  \n  .rating-input {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n}\n\n@media (max-width: 480px) {\n  .movie-actions {\n    flex-direction: column;\n  }\n  \n  .movie-actions .btn {\n    width: 100%;\n  }\n  \n  .cast-grid, .similar-carousel {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  .review-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .review-rating {\n    margin-top: 0.5rem;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}