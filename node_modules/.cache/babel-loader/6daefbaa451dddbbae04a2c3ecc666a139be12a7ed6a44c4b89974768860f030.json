{"ast":null,"code":"export default {\n  name: 'MovieCard',\n  props: {\n    movie: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      // Utilisez une URL d'image locale pour l'image par défaut\n      defaultImage: '/images/placeholder-movie.jpg',\n      // Pour suivre si on a déjà essayé de charger une image alternative\n      triedAlternative: false\n    };\n  },\n  computed: {\n    posterUrl() {\n      // Vérification de sécurité pour s'assurer que le film est défini\n      if (!this.movie) return this.defaultImage;\n\n      // Vérifiez si on a une URL directe\n      if (this.movie.directPosterUrl) {\n        return this.movie.directPosterUrl;\n      }\n\n      // Gestion pour API TMDB avec Poster (format de notre application)\n      if (this.movie.Poster) {\n        return this.movie.Poster;\n      }\n\n      // Gestion pour API TMDB avec format original\n      if (this.movie.poster_path) {\n        return `https://image.tmdb.org/t/p/w500${this.movie.poster_path}`;\n      }\n\n      // Cas spécial pour \"Take the Money and Run\" (ID: 1441966)\n      if (this.movie.imdbID === '1441966' || this.movie.id === '1441966') {\n        return `https://image.tmdb.org/t/p/w500/fJkxQQd65iR6BMcYOxNgWwWibPu.jpg`;\n      }\n\n      // Essayez d'utiliser l'image de backdrop comme alternative\n      if (this.movie.backdrop_path || this.movie.backdropPath) {\n        const path = this.movie.backdrop_path || this.movie.backdropPath;\n        // Vérifiez si backdropPath est déjà une URL complète\n        if (typeof path === 'string' && path.startsWith('http')) {\n          return path;\n        } else if (path) {\n          return `https://image.tmdb.org/t/p/w500${path}`;\n        }\n      }\n\n      // Image par défaut en dernier recours\n      return this.defaultImage;\n    },\n    movieTitle() {\n      if (!this.movie) return 'Titre non disponible';\n      return this.movie.Title || this.movie.title || 'Titre non disponible';\n    },\n    movieYear() {\n      if (!this.movie) return '';\n      if (this.movie.Year) return this.movie.Year;\n      if (this.movie.release_date) return this.formatYear(this.movie.release_date);\n      return '';\n    }\n  },\n  methods: {\n    formatYear(dateString) {\n      if (!dateString) return '';\n      return new Date(dateString).getFullYear();\n    },\n    handleImageError(e) {\n      console.log(`Erreur de chargement d'image pour ${this.movieTitle}`, e.target.src);\n\n      // Éviter les boucles infinies\n      if (e.target.src === this.defaultImage) return;\n\n      // Cas spécial pour \"Take the Money and Run\" si l'ID correspond\n      if ((this.movie.imdbID === '1441966' || this.movie.id === '1441966') && !this.triedAlternative) {\n        console.log('Tentative avec URL spécifique pour Take the Money and Run');\n        this.triedAlternative = true;\n        e.target.src = `https://image.tmdb.org/t/p/w500/fJkxQQd65iR6BMcYOxNgWwWibPu.jpg`;\n        return;\n      }\n\n      // Essayez d'abord avec une autre taille d'image\n      if (e.target.src.includes('w500') && !this.triedAlternative) {\n        console.log('Tentative avec une taille d\\'image alternative');\n        this.triedAlternative = true;\n\n        // Essayez une taille plus petite\n        if (this.movie.poster_path) {\n          e.target.src = `https://image.tmdb.org/t/p/w342${this.movie.poster_path}`;\n          return;\n        } else if (this.movie.backdrop_path || this.movie.backdropPath) {\n          // Essayez d'utiliser l'image de fond\n          const path = this.movie.backdrop_path || this.movie.backdropPath;\n          if (typeof path === 'string' && !path.startsWith('http')) {\n            e.target.src = `https://image.tmdb.org/t/p/w780${path}`;\n            return;\n          }\n        }\n      }\n\n      // Si toutes les tentatives échouent, utilisez l'image par défaut\n      e.target.src = this.defaultImage;\n    },\n    mounted() {\n      // Log pour déboguer\n      console.log('Structure du film sur la page d\\'accueil:', this.movie);\n    }\n  }\n};","map":{"version":3,"names":["name","props","movie","type","Object","required","data","defaultImage","triedAlternative","computed","posterUrl","directPosterUrl","Poster","poster_path","imdbID","id","backdrop_path","backdropPath","path","startsWith","movieTitle","Title","title","movieYear","Year","release_date","formatYear","methods","dateString","Date","getFullYear","handleImageError","e","console","log","target","src","includes","mounted"],"sources":["/Users/alandelaigue/Desktop/cinema-v2/src/components/MovieCard.vue"],"sourcesContent":["<template>\n  <div class=\"movie-card\" @click=\"$emit('click')\">\n    <div class=\"poster-container\">\n      <img \n        :src=\"posterUrl\"\n        :alt=\"movieTitle\"\n        class=\"movie-poster\"\n        @error=\"handleImageError\"\n      />\n    </div>\n    <div class=\"movie-info\">\n      <h3 class=\"movie-title\">{{ movieTitle }}</h3>\n      <p class=\"movie-year\">{{ movieYear }}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'MovieCard',\n  props: {\n    movie: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      // Utilisez une URL d'image locale pour l'image par défaut\n      defaultImage: '/images/placeholder-movie.jpg',\n      // Pour suivre si on a déjà essayé de charger une image alternative\n      triedAlternative: false\n    };\n  },\n  computed: {\n    posterUrl() {\n      // Vérification de sécurité pour s'assurer que le film est défini\n      if (!this.movie) return this.defaultImage;\n\n      // Vérifiez si on a une URL directe\n      if (this.movie.directPosterUrl) {\n        return this.movie.directPosterUrl;\n      }\n\n      // Gestion pour API TMDB avec Poster (format de notre application)\n      if (this.movie.Poster) {\n        return this.movie.Poster;\n      }\n      \n      // Gestion pour API TMDB avec format original\n      if (this.movie.poster_path) {\n        return `https://image.tmdb.org/t/p/w500${this.movie.poster_path}`;\n      }\n\n      // Cas spécial pour \"Take the Money and Run\" (ID: 1441966)\n      if (this.movie.imdbID === '1441966' || this.movie.id === '1441966') {\n        return `https://image.tmdb.org/t/p/w500/fJkxQQd65iR6BMcYOxNgWwWibPu.jpg`;\n      }\n\n      // Essayez d'utiliser l'image de backdrop comme alternative\n      if (this.movie.backdrop_path || this.movie.backdropPath) {\n        const path = this.movie.backdrop_path || this.movie.backdropPath;\n        // Vérifiez si backdropPath est déjà une URL complète\n        if (typeof path === 'string' && path.startsWith('http')) {\n          return path;\n        } else if (path) {\n          return `https://image.tmdb.org/t/p/w500${path}`;\n        }\n      }\n      \n      // Image par défaut en dernier recours\n      return this.defaultImage;\n    },\n    \n    movieTitle() {\n      if (!this.movie) return 'Titre non disponible';\n      return this.movie.Title || this.movie.title || 'Titre non disponible';\n    },\n    \n    movieYear() {\n      if (!this.movie) return '';\n      if (this.movie.Year) return this.movie.Year;\n      if (this.movie.release_date) return this.formatYear(this.movie.release_date);\n      return '';\n    }\n  },\n  methods: {\n    formatYear(dateString) {\n      if (!dateString) return '';\n      return new Date(dateString).getFullYear();\n    },\n    \n    handleImageError(e) {\n      console.log(`Erreur de chargement d'image pour ${this.movieTitle}`, e.target.src);\n      \n      // Éviter les boucles infinies\n      if (e.target.src === this.defaultImage) return;\n\n      // Cas spécial pour \"Take the Money and Run\" si l'ID correspond\n      if ((this.movie.imdbID === '1441966' || this.movie.id === '1441966') && !this.triedAlternative) {\n        console.log('Tentative avec URL spécifique pour Take the Money and Run');\n        this.triedAlternative = true;\n        e.target.src = `https://image.tmdb.org/t/p/w500/fJkxQQd65iR6BMcYOxNgWwWibPu.jpg`;\n        return;\n      }\n      \n      // Essayez d'abord avec une autre taille d'image\n      if (e.target.src.includes('w500') && !this.triedAlternative) {\n        console.log('Tentative avec une taille d\\'image alternative');\n        this.triedAlternative = true;\n        \n        // Essayez une taille plus petite\n        if (this.movie.poster_path) {\n          e.target.src = `https://image.tmdb.org/t/p/w342${this.movie.poster_path}`;\n          return;\n        } else if (this.movie.backdrop_path || this.movie.backdropPath) {\n          // Essayez d'utiliser l'image de fond\n          const path = this.movie.backdrop_path || this.movie.backdropPath;\n          if (typeof path === 'string' && !path.startsWith('http')) {\n            e.target.src = `https://image.tmdb.org/t/p/w780${path}`;\n            return;\n          }\n        }\n      }\n      \n      // Si toutes les tentatives échouent, utilisez l'image par défaut\n      e.target.src = this.defaultImage;\n    },\n\n    mounted() {\n      // Log pour déboguer\n      console.log('Structure du film sur la page d\\'accueil:', this.movie);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.movie-card {\n  background-color: white;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  transition: transform 0.3s, box-shadow 0.3s;\n  cursor: pointer;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.movie-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.poster-container {\n  position: relative;\n  overflow: hidden;\n  padding-top: 150%; /* Ratio d'aspect 2:3 pour les affiches de films */\n}\n\n.movie-poster {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.movie-info {\n  padding: 1rem;\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.movie-title {\n  font-size: 1rem;\n  font-weight: 600;\n  margin-bottom: 0.3rem;\n  color: #333;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.movie-year {\n  color: #666;\n  font-size: 0.9rem;\n  margin-top: auto;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}